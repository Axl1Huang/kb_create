# 工作流内存需求分析报告

## 系统资源配置

### 系统内存
- 总内存: 7.5GB
- 已使用: 6.3GB
- 空闲: 307MB
- 可用: 787MB
- 交换空间: 2GB (已全部使用)

### GPU配置
- 显卡: NVIDIA GeForce RTX 5080
- 显存: 16GB
- 当前使用: 41MB
- 驱动版本: 573.22
- CUDA版本: 12.8

## MinerU内存使用情况

### 当前运行的MinerU进程
- PID: 749988
- 内存使用: 16.7% of total system memory
- 虚拟内存大小(VSZ): 49,327,148 KB (~47GB)
- 实际内存大小(RSS): 1,309,864 KB (~1.25GB)

### 内存分析
1. **虚拟内存占用高**: MinerU进程的虚拟内存占用约47GB，这主要是因为模型加载和处理时需要大量的虚拟地址空间。
2. **实际内存使用**: 实际物理内存使用约1.25GB，这表明MinerU在处理PDF时需要至少1.5-2GB的可用内存才能稳定运行。
3. **GPU内存**: 当前GPU内存使用仅为41MB，说明MinerU可能没有正确使用GPU进行处理。

## 工作流内存需求

### 最低配置要求
- **CPU模式**:
  - RAM: 至少4GB可用内存（推荐8GB以上）
  - 虚拟内存: 至少10GB可用空间
  - 处理时间: 较长（取决于PDF复杂度）

- **GPU模式**:
  - RAM: 至少2GB可用内存
  - GPU显存: 至少4GB（推荐8GB以上）
  - 虚拟内存: 至少10GB可用空间
  - 处理时间: 较短（GPU加速）

### 推荐配置
- **开发/测试环境**:
  - RAM: 8GB以上
  - CPU: 多核心处理器
  - 存储: SSD，至少20GB可用空间

- **生产环境**:
  - RAM: 16GB以上
  - GPU: 8GB显存以上（如RTX 3070或更高）
  - 存储: SSD，至少50GB可用空间

## 优化建议

### 内存优化
1. **批处理控制**: 避免同时处理多个大型PDF文件
2. **内存监控**: 在处理过程中监控内存使用情况
3. **临时文件清理**: 及时清理处理过程中的临时文件
4. **交换空间**: 确保有足够的交换空间（建议4GB以上）

### GPU优化
1. **驱动更新**: 确保NVIDIA驱动和CUDA工具包为最新版本
2. **环境变量**: 设置正确的CUDA环境变量
3. **设备指定**: 在命令行中明确指定GPU设备（如`-d cuda:0`）

### 稳定性建议
1. **超时设置**: 当前已设置10分钟超时，对于大多数PDF文件足够
2. **错误处理**: 已实现失败重试机制
3. **资源监控**: 建议添加实时资源监控功能